["1c160a1cb0bdaefbc1bb5c5f8546e5ec74c05dcb","3e24d2f37090074e3ab3c27651604af8bed571a9",["./class"],[20],{"version":3,"sources":["/var/www/geruapp/node_modules/art/core/path.js"],"names":["Class","require","module","exports","initialize","path","reset","push","p","Array","prototype","join","call","arguments","match","last","cmd","i","move","line","curve","arc","moveTo","lineTo","curveTo","arcTo","penY","penX","close","penDownX","penDownY","_pivotX","_pivotY","onReset","x","y","onMove","onLine","c1x","c1y","c2x","c2y","ex","ey","onBezierCurve","rx","ry","outer","counterClockwise","rotation","Math","abs","tX","tY","clockwise","large","rad","PI","cos","sin","cx","cy","rxry","rycx","rxcy","a","sqrt","cxd","cyd","xx","yx","xy","yy","sa","atan2","ea","onArc","counterArc","counterArcTo","onClose","sx","sy","gx","gy","g","v1","v2","u","isNaN","Error","s1x","s1y","l1x","l1y","l2x","l2y","r2x","r2y","r1x","r1y","l2r1x","l2r1y","ccw","n","ceil","step","k","tan","cp1x","cp1y","cp2x","cp2y"],"mappings":"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","sourcesContent":["var Class = require('./class');\n\nmodule.exports = Class({\n\t\n\tinitialize: function(path){\n\t\tthis.reset().push(path);\n\t},\n\n\t/* parser */\n\t\n\tpush: function(){\n\t\tvar p = Array.prototype.join.call(arguments, ' ')\n\t\t\t.match(/[a-df-z]|[\\-+]?(?:[\\d\\.]e[\\-+]?|[^\\s\\-+,a-z])+/ig);\n\t\tif (!p) return this;\n\n\t\tvar last, cmd = p[0], i = 1;\n\t\twhile (cmd){\n\t\t\tswitch (cmd){\n\t\t\t\tcase 'm': this.move(p[i++], p[i++]); break;\n\t\t\t\tcase 'l': this.line(p[i++], p[i++]); break;\n\t\t\t\tcase 'c': this.curve(p[i++], p[i++], p[i++], p[i++], p[i++], p[i++]); break;\n\t\t\t\tcase 's': this.curve(p[i++], p[i++], null, null, p[i++], p[i++]); break;\n\t\t\t\tcase 'q': this.curve(p[i++], p[i++], p[i++], p[i++]); break;\n\t\t\t\tcase 't': this.curve(p[i++], p[i++]); break;\n\t\t\t\tcase 'a': this.arc(p[i+5], p[i+6], p[i], p[i+1], p[i+3], !+p[i+4], p[i+2]); i += 7; break;\n\t\t\t\tcase 'h': this.line(p[i++], 0); break;\n\t\t\t\tcase 'v': this.line(0, p[i++]); break;\n\n\t\t\t\tcase 'M': this.moveTo(p[i++], p[i++]); break;\n\t\t\t\tcase 'L': this.lineTo(p[i++], p[i++]); break;\n\t\t\t\tcase 'C': this.curveTo(p[i++], p[i++], p[i++], p[i++], p[i++], p[i++]); break;\n\t\t\t\tcase 'S': this.curveTo(p[i++], p[i++], null, null, p[i++], p[i++]); break;\n\t\t\t\tcase 'Q': this.curveTo(p[i++], p[i++], p[i++], p[i++]); break;\n\t\t\t\tcase 'T': this.curveTo(p[i++], p[i++]); break;\n\t\t\t\tcase 'A': this.arcTo(p[i+5], p[i+6], p[i], p[i+1], p[i+3], !+p[i+4], p[i+2]); i += 7; break;\n\t\t\t\tcase 'H': this.lineTo(p[i++], this.penY); break;\n\t\t\t\tcase 'V': this.lineTo(this.penX, p[i++]); break;\n\t\t\t\t\n\t\t\t\tcase 'Z': case 'z': this.close(); break;\n\t\t\t\tdefault: cmd = last; i--; continue;\n\t\t\t}\n\n\t\t\tlast = cmd;\n\t\t\tif (last == 'm') last = 'l';\n\t\t\telse if (last == 'M') last = 'L';\n\t\t\tcmd = p[i++];\n\t\t}\n\t\treturn this;\n\t},\n\n\t/* utility methods */\n\n\treset: function(){\n\t\tthis.penX = this.penY = 0;\n\t\tthis.penDownX = this.penDownY = null;\n\t\tthis._pivotX = this._pivotY = 0;\n\t\tthis.onReset();\n\t\treturn this;\n\t},\n\t\n\tmove: function(x,y){\n\t\tthis.onMove(this.penX, this.penY, this._pivotX = this.penX += (+x), this._pivotY = this.penY += (+y));\n\t\treturn this;\n\t},\n\tmoveTo: function(x,y){\n\t\tthis.onMove(this.penX, this.penY, this._pivotX = this.penX = (+x), this._pivotY = this.penY = (+y));\n\t\treturn this;\n\t},\n\n\tline: function(x,y){\n\t\treturn this.lineTo(this.penX + (+x), this.penY + (+y));\n\t},\n\tlineTo: function(x,y){\n\t\tif (this.penDownX == null){ this.penDownX = this.penX; this.penDownY = this.penY; }\n\t\tthis.onLine(this.penX, this.penY, this._pivotX = this.penX = (+x), this._pivotY = this.penY = (+y));\n\t\treturn this;\n\t},\n\t\n\tcurve: function(c1x, c1y, c2x, c2y, ex, ey){\n\t\tvar x = this.penX, y = this.penY;\n\t\treturn this.curveTo(\n\t\t\tx + (+c1x), y + (+c1y),\n\t\t\tc2x == null ? null : x + (+c2x),\n\t\t\tc2y == null ? null : y + (+c2y),\n\t\t\tex == null ? null : x + (+ex),\n\t\t\tey == null ? null : y + (+ey)\n\t\t);\n\t},\n\tcurveTo: function(c1x, c1y, c2x, c2y, ex, ey){\n\t\tvar x = this.penX, y = this.penY;\n\t\tif (c2x == null){\n\t\t\tc2x = +c1x; c2y = +c1y;\n\t\t\tc1x = (x * 2) - (this._pivotX || 0); c1y = (y * 2) - (this._pivotY || 0);\n\t\t}\n\t\tif (ex == null){\n\t\t\tthis._pivotX = +c1x; this._pivotY = +c1y;\n\t\t\tex = +c2x; ey = +c2y;\n\t\t\tc2x = (ex + (+c1x) * 2) / 3; c2y = (ey + (+c1y) * 2) / 3;\n\t\t\tc1x = (x + (+c1x) * 2) / 3; c1y = (y + (+c1y) * 2) / 3;\n\t\t} else {\n\t\t\tthis._pivotX = +c2x; this._pivotY = +c2y;\n\t\t}\n\t\tif (this.penDownX == null){ this.penDownX = x; this.penDownY = y; }\n\t\tthis.onBezierCurve(x, y, +c1x, +c1y, +c2x, +c2y, this.penX = +ex, this.penY = +ey);\n\t\treturn this;\n\t},\n\t\n\tarc: function(x, y, rx, ry, outer, counterClockwise, rotation){\n\t\treturn this.arcTo(this.penX + (+x), this.penY + (+y), rx, ry, outer, counterClockwise, rotation);\n\t},\n\tarcTo: function(x, y, rx, ry, outer, counterClockwise, rotation){\n\t\try = Math.abs(+ry || +rx || (+y - this.penY));\n\t\trx = Math.abs(+rx || (+x - this.penX));\n\n\t\tif (!rx || !ry || (x == this.penX && y == this.penY)) return this.lineTo(x, y);\n\n\t\tvar tX = this.penX, tY = this.penY, clockwise = !+counterClockwise, large = !!+outer;\n\n\t\tvar rad = rotation ? rotation * Math.PI / 180 : 0, cos = Math.cos(rad), sin = Math.sin(rad);\n\t\tx -= tX; y -= tY;\n\t\t\n\t\t// Ellipse Center\n\t\tvar cx = cos * x / 2 + sin * y / 2,\n\t\t\tcy = -sin * x / 2 + cos * y / 2,\n\t\t\trxry = rx * rx * ry * ry,\n\t\t\trycx = ry * ry * cx * cx,\n\t\t\trxcy = rx * rx * cy * cy,\n\t\t\ta = rxry - rxcy - rycx;\n\n\t\tif (a < 0){\n\t\t\ta = Math.sqrt(1 - a / rxry);\n\t\t\trx *= a; ry *= a;\n\t\t\tcx = x / 2; cy = y / 2;\n\t\t} else {\n\t\t\ta = Math.sqrt(a / (rxcy + rycx));\n\t\t\tif (large == clockwise) a = -a;\n\t\t\tvar cxd = -a * cy * rx / ry,\n\t\t\t    cyd =  a * cx * ry / rx;\n\t\t\tcx = cos * cxd - sin * cyd + x / 2;\n\t\t\tcy = sin * cxd + cos * cyd + y / 2;\n\t\t}\n\n\t\t// Rotation + Scale Transform\n\t\tvar xx =  cos / rx, yx = sin / rx,\n\t\t    xy = -sin / ry, yy = cos / ry;\n\n\t\t// Start and End Angle\n\t\tvar sa = Math.atan2(xy * -cx + yy * -cy, xx * -cx + yx * -cy),\n\t\t    ea = Math.atan2(xy * (x - cx) + yy * (y - cy), xx * (x - cx) + yx * (y - cy));\n\n\t\tcx += tX; cy += tY;\n\t\tx += tX; y += tY;\n\n\t\t// Circular Arc\n\t\tif (this.penDownX == null){ this.penDownX = this.penX; this.penDownY = this.penY; }\n\t\tthis.onArc(\n\t\t\ttX, tY, this._pivotX = this.penX = x, this._pivotY = this.penY = y,\n\t\t\tcx, cy, rx, ry, sa, ea, !clockwise, rotation\n\t\t);\n\t\treturn this;\n\t},\n\n\tcounterArc: function(x, y, rx, ry, outer){\n\t\treturn this.arc(x, y, rx, ry, outer, true);\n\t},\n\tcounterArcTo: function(x, y, rx, ry, outer){\n\t\treturn this.arcTo(x, y, rx, ry, outer, true);\n\t},\n\n\tclose: function(){\n\t\tif (this.penDownX != null){\n\t\t\tthis.onClose(this.penX, this.penY, this.penX = this.penDownX, this.penY = this.penDownY);\n\t\t\tthis.penDownX = null;\n\t\t}\n\t\treturn this;\n\t},\n\n\t/* overridable handlers */\n\t\n\tonReset: function(){\n\t},\n\n\tonMove: function(sx, sy, ex, ey){\n\t},\n\n\tonLine: function(sx, sy, ex, ey){\n\t\tthis.onBezierCurve(sx, sy, sx, sy, ex, ey, ex, ey);\n\t},\n\n\tonBezierCurve: function(sx, sy, c1x, c1y, c2x, c2y, ex, ey){\n\t\tvar gx = ex - sx, gy = ey - sy,\n\t\t\tg = gx * gx + gy * gy,\n\t\t\tv1, v2, cx, cy, u;\n\n\t\tcx = c1x - sx; cy = c1y - sy;\n\t\tu = cx * gx + cy * gy;\n\n\t\tif (u > g){\n\t\t\tcx -= gx;\n\t\t\tcy -= gy;\n\t\t} else if (u > 0 && g != 0){\n\t\t\tcx -= u/g * gx;\n\t\t\tcy -= u/g * gy;\n\t\t}\n\n\t\tv1 = cx * cx + cy * cy;\n\n\t\tcx = c2x - sx; cy = c2y - sy;\n\t\tu = cx * gx + cy * gy;\n\n\t\tif (u > g){\n\t\t\tcx -= gx;\n\t\t\tcy -= gy;\n\t\t} else if (u > 0 && g != 0){\n\t\t\tcx -= u/g * gx;\n\t\t\tcy -= u/g * gy;\n\t\t}\n\n\t\tv2 = cx * cx + cy * cy;\n\n\t\tif (v1 < 0.01 && v2 < 0.01){\n\t\t\tthis.onLine(sx, sy, ex, ey);\n\t\t\treturn;\n\t\t}\n\n\t\t// Avoid infinite recursion\n\t\tif (isNaN(v1) || isNaN(v2)){\n\t\t\tthrow new Error('Bad input');\n\t\t}\n\n\t\t// Split curve\n\t\tvar s1x =   (c1x + c2x) * 0.5,   s1y =   (c1y + c2y) * 0.5,\n\t\t    l1x =   (c1x + sx)  * 0.5,   l1y =   (c1y + sy)  * 0.5,\n\t\t    l2x =   (l1x + s1x) * 0.5,   l2y =   (l1y + s1y) * 0.5,\n\t\t    r2x =   (ex + c2x)  * 0.5,   r2y =   (ey + c2y)  * 0.5,\n\t\t    r1x =   (r2x + s1x) * 0.5,   r1y =   (r2y + s1y) * 0.5,\n\t\t    l2r1x = (l2x + r1x) * 0.5,   l2r1y = (l2y + r1y) * 0.5;\n\n\t\t// TODO: Manual stack if necessary. Currently recursive without tail optimization.\n\t\tthis.onBezierCurve(sx, sy, l1x, l1y, l2x, l2y, l2r1x, l2r1y);\n\t\tthis.onBezierCurve(l2r1x, l2r1y, r1x, r1y, r2x, r2y, ex, ey);\n\t},\n\n\tonArc: function(sx, sy, ex, ey, cx, cy, rx, ry, sa, ea, ccw, rotation){\n\t\t// Inverse Rotation + Scale Transform\n\t\tvar rad = rotation ? rotation * Math.PI / 180 : 0, cos = Math.cos(rad), sin = Math.sin(rad),\n\t\t\txx = cos * rx, yx = -sin * ry,\n\t\t    xy = sin * rx, yy =  cos * ry;\n\n\t\t// Bezier Curve Approximation\n\t\tvar arc = ea - sa;\n\t\tif (arc < 0 && !ccw) arc += Math.PI * 2;\n\t\telse if (arc > 0 && ccw) arc -= Math.PI * 2;\n\n\t\tvar n = Math.ceil(Math.abs(arc / (Math.PI / 2))),\n\t\t    step = arc / n,\n\t\t    k = (4 / 3) * Math.tan(step / 4);\n\n\t\tvar x = Math.cos(sa), y = Math.sin(sa);\n\n\t\tfor (var i = 0; i < n; i++){\n\t\t\tvar cp1x = x - k * y, cp1y = y + k * x;\n\n\t\t\tsa += step;\n\t\t\tx = Math.cos(sa); y = Math.sin(sa);\n\n\t\t\tvar cp2x = x + k * y, cp2y = y - k * x;\n\n\t\t\tthis.onBezierCurve(\n\t\t\t\tsx, sy,\n\t\t\t\tcx + xx * cp1x + yx * cp1y, cy + xy * cp1x + yy * cp1y,\n\t\t\t\tcx + xx * cp2x + yx * cp2y, cy + xy * cp2x + yy * cp2y,\n\t\t\t\t(sx = (cx + xx * x + yx * y)), (sy = (cy + xy * x + yy * y))\n\t\t\t);\n\t\t}\n\t},\n\n\tonClose: function(sx, sy, ex, ey){\n\t\tthis.onLine(sx, sy, ex, ey);\n\t}\n\n});"]}]